%
O9008(TOOL BREAK DETECT) 
(BASED ON CURRENT HEIGHT OFFSET) 
 
#150=#4120 
 
G65P9863T#150H-.05 
 
M99


O9016
(M86)
 
(SET TOOL TO MEASURE)
#100=#20 
 
(SET RADIUS OF TOOL)
#102=#18 

(DETERMINE IF RADIUS PRESENT)
IF[#102EQ0]GOTO10
IF[#102GT0]GOTO20

(NO RADIUS CHECK)
N10
#103=1.
GOTO30

(CHECK RADIUS)
N20
#103=2.
GOTO30
 

(DIFFERENT HEIGHT OFFSET)
N30
IF[#11LE0]GOTO100
IF[#11GT0]GOTO200
 
 
(SAME HEIGHT OFFSET AS TOOL)
N100 
#101=#100
GOTO9017 
 
(DIFFERENT HEIGHT OFFSET AS TOOL)
N200 
#101=#11 
GOTO9017 

N9017
 
T#100M6(LOAD TOOL) 
M5 
 

G65P9862 B#103 T#101  R#102 
 
M99


O9017
(LENGTH ONLY)
(NO RADIUS SHIFT)
(A = 1ST TOOL) 
(B = LAST TOOL)
(***)
 
(SET FIRST TOOL)
#175 = #1
(SET LAST TOOL)
#176 = #2
 
(M86)
 
 
WHILE[#175LE#176]DO1 
G0G53Z0
G49
T#175M6
M5 
G4X1.
G65P9862H#175B1. 
#175=#175+1. 
END1 
G0G53Z0M5
M99

O9018(TOOL BREAKAGE CHECK) 
 
#100=#20(SET TOOL OFFSET)
 
 
 
N5 
IF[#11LE0]GOTO6
IF[#11GT0]GOTO7
 
N6 
#101=.05 
GOTO10 
 
N7 
#101=#11 
GOTO10 
 
N10
IF[#25LE0]GOTO11 
IF[#25GT0]GOTO12 
 
N11
#102=0 
GOTO15 
 
N12
#102=#25 
GOTO15 
 
N15
IF[#13LE0]GOTO16 
IF[#13LE30]GOTO17
IF[#13GT30]GOTO18
 
N16
#103=0 
GOTO20 
 
N17
#103=1 
#170=#13 
#175=100 
GOTO20 
 
N18
#103=1 
#175=200 
GOTO20 
 
N20
IF[#103EQ1]GOTO9020
IF[#103EQ0]GOTO9019
GOTO9019 
 
 
N9019
 
G65P9863T#100H-#101Y#102 
 
GOTO999
 
 
N9020
 
 
G65P9863T#100H-#101Y#102M#103
 
IF[#148EQ1]GOTO#175
 
 
 
N100 
G90
G0G53Z0
T#170
M6 
GOTO999
 
N200 
 
GOTO999
 
 
 
N999 
M99

O9015(TOOL EXCHANGE MACRO)
(PHONE BOOTH SPECIFIC) 
(NUMBER OF TOOLS IN THE TURRET)
#105=21. 
(CANCEL HEIGHT OFFSET) 
G49
G0G53Z0
(#100 = TOOL TO EXCHANGE)
#100=#20 
(CALCULATION FOR CORRECT TOOL) 
#101=#100+2
IF[#101GT#105]GOTO1 
IF[#101LE#105]GOTO2 
N1 
(SET CORRECT SPINDLE POCKET) 
#102=#101-#105 
GOTO3
N2 
(SET CORRECT SPINDLE POCKET) 
#102=#101
N3 
(CHANGE TOOL)
T#102M6
M99

O9019(SET Z WORK OFFSET) 
(G160 B1. S54.)
(B = BIAS) 
(S = HOME LOCATION)
 
(SET BIAS) 
#100=#2
(SET HOME LOCATION)
#101=#19 
 
(SET CURRENT TOOL NUMBER)
#104=#4120 
 
(SEND TO RIGHT SET OF OFFSET VARIABLES)
IF[[#101GE54.]AND[#101LE59.]]GOTO1 
IF[[#101GE1.]AND[#101LE48.]GOTO2
#110=1.
GOTO99

N1
(G54-G59)
#105=1.
GOTO10

N2
(G54.1 P1 - G54.1 P48)
#105=2.
GOTO10
 
N10
(CHECK TO SEE IF H OFFSET HAS A VALUE)
IF[#[2200+#104]EQ0.]THEN[#110EQ2.]
IF[#110EQ2.]GOTO99
IF[#105EQ1.]GOTO20
IF[#105EQ2.]GOTO30
#110=99.
GOTO99


N20
(G54-G59)
#102=#101-54.
#103=#102*20 
#[5223+#103]=#5023-#[2200+#104]-#100 
GOTO99
 
 

N30
(G54.1 P1 - G54.1 P48) 
#102=#101-1. 
#103=#102*20 
#[7003+#103]=#5023-#[2200+#104]-#100 
GOTO99



N301
#3000=1. (INCORRECT WORK OFFSET S1.-S48. OR S54.-S59.)

N302
#3000=2. (TOOL OFFSET IS ZERO)

N399
#3000=99. (SPOCK SAYS: YOUR LOGIC IS SERIOUSLY FLAWED)
 
N99 
G0G90G53Z0 
G49
GOTO399

N399
IF[#110GT0.]GOTO[300+#110]
GOTO999




N999
M99

O9930
(RUN THIS PROGRAM TO:)
(-CHANGE PARAMETERS ENABLING GCODES)
(-G120 TOOL CHANGE POSITION)
(-G150 SINGLE TOOL MEASURE)
(-G155 MULTITOOL MEASURE)
(-M45 SIMPLE TOOL CHECK)
(-G145 ADV TOOL CHECK)
G10L52
N6055R120 (G120 TOOL CHANGE POSITION)
N6056R150 (G150 SINGLE TOOL MEASURE)
N6057R155 (G155 MULTI TOOL MEASURE)
N6058R145 (G145 ADV TOOL CHECK)
N6059R160 (G160 SET WORK OFFSET)
N6078R45 (M45 TOOL CHECK)
G11
M30
%